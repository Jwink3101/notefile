# Repository Guidelines

## Project Structure & Module Organization
- `notefile/` is the main Python package. Key entry points are `notefile/cli.py` (CLI) and `notefile/notefile.py` (core logic).
- `tests.py` contains the pytest suite (single-file test module).
- `scripts/` and `macOS_sync/` hold supporting utilities and sync helpers.
- Root-level helpers include `build_help.py`, `copy_to_github.py`, and legacy/standalone modules like `notefile.py`.
- Documentation lives in `readme.md` and `changelog.md`.
- `CLI_help.md` is generated by `build_help.py`; do not edit it manually.

## Build, Test, and Development Commands
- `python -m pip install -r requirements.txt` installs runtime dependencies.
- `python -m pip install -e .` installs the package in editable mode (PEP 517 via `pyproject.toml`).
- `notefile -h` shows CLI help (entry point from `pyproject.toml`).
- `pytest tests.py` runs the test suite.
- `./run_with_cov.sh` runs pytest with coverage and writes HTML to `htmlcov/`.

## Coding Style & Naming Conventions
- Python code uses 4-space indentation.
- Formatting uses Black with line length 100 (`pyproject.toml`).
- Prefer `snake_case` for functions/variables and `PascalCase` for classes.
- Keep CLI argument names and short flags consistent with existing commands in `notefile/cli.py`.

## Testing Guidelines
- Tests are written with pytest and live in `tests.py`.
- New behavior should include a corresponding test in `tests.py`; follow existing naming like `test_mod()`.
- Tests create their own workspace under `testdirs/`; avoid relying on external files.

## Commit & Pull Request Guidelines
- Commit messages are short and direct (e.g., “fixed debug cruft”, “Ready to release”).
- PRs should include a brief summary, testing notes (commands + results), and updates to `changelog.md` when user-facing changes occur.
- If changes affect CLI behavior, update examples or help text as needed.

## Security & Configuration Tips
- Runtime dependency is `ruamel.yaml`; optional faster YAML backends may be used by users.
- Do not change the `.notes.yaml` file format without strong justification and documentation.
